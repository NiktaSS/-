
## ‚úÖ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ `pytest`

### üìå –ö–∞–∫ –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã:

- –§–∞–π–ª—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `test_*.py` –∏–ª–∏ `*_test.py`
- –§—É–Ω–∫—Ü–∏–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `test_—á—Ç–æ_–ø—Ä–æ–≤–µ—Ä—è–µ—Ç`
- –ë–µ–∑ –∫–ª–∞—Å—Å–æ–≤ ‚Äî –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `assert`, –Ω–µ –Ω—É–∂–µ–Ω `self.assertEqual()`

---

## üîß –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞

**–§–∞–π–ª:** `math_utils.py`

```python
def add(a, b):
    return a + b
```

**–§–∞–π–ª:** `test_math_utils.py`

```python
from math_utils import add

def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
```

---

## ‚ñ∂Ô∏è –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
pytest
```

–∏–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:

```bash
pytest test_math_utils.py
```

üì¶ `pytest` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç –≤—Å–µ —Ç–µ—Å—Ç-—Ñ–∞–π–ª—ã –∏ —Ç–µ—Å—Ç-—Ñ—É–Ω–∫—Ü–∏–∏.

---

## üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- `@pytest.mark.parametrize(...)` ‚Äî –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –§–∏–∫—Å—Ç—É—Ä—ã (`@pytest.fixture`) ‚Äî —É–¥–æ–±–Ω–æ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ/–æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –ü–ª–∞–≥–∏–Ω—ã: `pytest-cov` –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è, `pytest-django`, `pytest-asyncio` –∏ –¥—Ä.

---

## üí° –ü—Ä–∏–º–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–µ–π:

```python
import pytest
from math_utils import add

@pytest.mark.parametrize("a,b,result", [
    (2, 3, 5),
    (-1, -1, -2),
    (0, 0, 0)
])
def test_add(a, b, result):
    assert add(a, b) == result
```

---

## üìù –ß—Ç–æ –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ:

> ¬´Pytest ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤. –¢–µ—Å—Ç—ã –ø–∏—à—É—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å `assert`, –∞ —Ñ–∞–π–ª—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `test_*.py`. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `pytest`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—é –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã, –ª–µ–≥–∫–æ —á–∏—Ç–∞–µ—Ç—Å—è –∏ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è¬ª.

## ‚úÖ –ß—Ç–æ —Ç–∞–∫–æ–µ `fixture` –≤ `pytest`

- –≠—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è **–ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
- –û–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**, –µ—Å–ª–∏ –µ—ë –∏–º—è —É–∫–∞–∑–∞–Ω–æ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö —Ç–µ—Å—Ç–∞
- –ú–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω –≤ —Ç–µ—Å—Ç–µ

---

### üîß –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–∞—è —Ñ–∏–∫—Å—Ç—É—Ä–∞

```python
import pytest

@pytest.fixture
def sample_data():
    return {"a": 10, "b": 5}

def test_sum(sample_data):
    result = sample_data["a"] + sample_data["b"]
    assert result == 15
```

üí° `sample_data` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –∏ –µ—ë —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ `test_sum`.

---

### üîß –ü—Ä–∏–º–µ—Ä 2: –§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è Flask

–ï—Å–ª–∏ —Ç—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—à—å API –Ω–∞ Flask:

```python
# app.py
from flask import Flask

def create_app():
    app = Flask(__name__)

    @app.route("/ping")
    def ping():
        return "pong"

    return app
```

```python
# test_app.py
import pytest
from app import create_app

@pytest.fixture
def client():
    app = create_app()
    app.testing = True
    return app.test_client()

def test_ping(client):
    response = client.get("/ping")
    assert response.data == b"pong"
```

---

### üîß –ü—Ä–∏–º–µ—Ä 3: –§–∏–∫—Å—Ç—É—Ä–∞ —Å `yield` (–¥–ª—è setup/teardown)

```python
@pytest.fixture
def resource():
    print("üõ†Ô∏è Setup")
    yield {"msg": "test"}
    print("üßπ Teardown")

def test_demo(resource):
    assert resource["msg"] == "test"
```

üì§ –í—ã–≤–æ–¥:

```
üõ†Ô∏è Setup
üßπ Teardown
```

---

## üìù –ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ:

> ¬´–§–∏–∫—Å—Ç—É—Ä—ã –≤ `pytest` ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤. –û–Ω–∏ –æ–±—ä—è–≤–ª—è—é—Ç—Å—è —Å `@pytest.fixture` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ—Å—Ç-—Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –∏–º–µ–Ω–∏. –§–∏–∫—Å—Ç—É—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –∏ –¥–µ–ª–∞—Ç—å setup/teardown —á–µ—Ä–µ–∑ `yield`¬ª.
